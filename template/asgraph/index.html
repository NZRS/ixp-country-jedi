<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>IXP Country Jedi - AS Graph</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="../bower_components/alchemyjs/dist/alchemy.css">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="../bower_components/underscore/underscore-min.js"></script>  
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/queue.v1.min.js" type="text/javascript"></script>
    <script src="../bower_components/d3-plugins/fisheye/fisheye.js"></script>
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../common/jedi-utils.js"></script>
    <script src="../bower_components/vis/dist/vis.min.js"></script>
    <link rel="stylesheet" href="../bower_components/vis/dist/vis.min.css">
    <script>
      var network;
      var datafile = 'asgraph.json';
      // Variables around edge styling
      var e_style = {
        'd': {'dash': [],
              'color': {'color': 'rgba(0,255,0,0.1)',
                        'highlight': 'rgba(0,255,0,1.0)'},
              'lbl': 'Direct'},
        'i': {'dash': [4, 6],
              'color': {'color': 'rgba(144,238,144,0.1)',
                        'highlight': 'rgba(144,238,144,1.0)'},
              'lbl': 'Indirect'}
      };


      $.getJSON(datafile, function(data, status) {
        var nodes = [];
        var edges = [];
        var vis_nodes, vis_edges;

        $.each(data['nodes'], function(i, entry) {
          nodes.push({
            'id': entry.id,
            'label': entry.label,
            'group': entry.group,
            'value': entry.value
          });
        });

        $.each(data['edges'], function(i, entry) {
          edges.push({
            'to': entry.to,
            'from': entry.from,
            'class': entry.type,
            'value': entry.value,
            'dashes': e_style[entry.type]['dash'],
            'color': e_style[entry.type]['color']
          });
        });

        drawNetwork();

        function drawNetwork() {
          var container = document.getElementById('aspath_vis');
          vis_nodes = new vis.DataSet(nodes);
          vis_edges = new vis.DataSet(edges);

          var vis_options = {
            autoResize: true,
            width: '100%',
            height: '100%',
            layout: {
              randomSeed: 42,
              improvedLayout: false
            },
            nodes: {
              shape: 'dot',
              size: 20,
              physics: true,
              borderWidth: 0.5,
              font: {
                color: 'white',
                size: 10
              }
            },
            edges: {
              width: 1.5,
              smooth: false,
              color: {
                color: 'rgba(211,211,211,0.1)',
                highlight: 'rgba(211,211,211,0.6)'
              }
            },
            groups: {
              asn: {
                color: {
                  background: 'rgba(255,255,0,0.8)',
                  border: 'white',
                  highlight: {
                    background: 'rgba(255,255,0,1.0)',
                    border: 'white'
                  }
                }
              },
              ixp: {
                color: {
                  background: 'rgba(255,0,64,0.8)',
                  border: 'pink',
                  highlight: {
                    background: 'rgba(255,0,64,1.0)',
                    border: 'pink'
                  }
                }
              }
            },
            interaction: {
              dragNodes: false,
              hideEdgesOnDrag: true,
              keyboard: false
            },
            physics: {
                "barnesHut": {
                  "gravitationalConstant": -7000,
                  "centralGravity": 2.0,
                  "springLength": 175,
                  "springConstant": 0.065,
                  "damping": 0.22,
                  "avoidOverlap": 0.9
                },
                "maxVelocity": 90,
                "minVelocity": 4,
                "timestep": 0.15
            }
          };

          var network_data = {nodes: vis_nodes, edges: vis_edges};
          network = new vis.Network(container, network_data, vis_options);
        }
      });
    </script>

    <style>
        #aspath_vis {
            background: black;
            height: 100%;
            padding-top: 50px;
        }
        #config {
            width: 100%;
            height: 300px;
        }
        html, body {
            height: 100%;
        }
    </style>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">IXP Country Jedi</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Main page</a></li>
            <li><a href="../geopath/index.html">Geopath</a></li>
            <li class="active"><a href="../asgraph/index.html">AS Graph</a></li>
            <li><a href="../ixpcountry/index.html">IXP Country</a></li>
            <li><a href="../ixplans/index.html">IXP LANs</a></li>
            <li><a href="../probetags/index.html">Probe Tags</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>

    </nav>
  
  </head>

  <body>
    <div id="aspath_vis"></div>
  </body>
</html>
